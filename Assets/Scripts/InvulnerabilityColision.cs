using UnityEngine;
using System.Collections;

public class InvulnerabilityColision : MonoBehaviour {

	private GameController mGameController;
	private bool mIsInvulnerable = false;
    private GameObject playerObject;

	void Start () {
		GameObject gameControlObject = GameObject.FindWithTag ("GameController");
        playerObject = GameObject.FindWithTag ("Player");
        playerObject.GetComponent<ParticleSystem>().Stop();
		if (gameControlObject != null) {
			mGameController = gameControlObject.GetComponent <GameController>(); //get this instance's own game controller connection
		}
		if (mGameController == null) {
			Debug.Log("Cannot find 'GameController' script"); //logging in case unable to find gamecontroller
		}
	}

	void OnTriggerEnter2D (Collider2D other) {
		Debug.Log("Invulnerability hit" + other);
        setIsInvulnerable(true);

		Destroy (gameObject);
	}

	public bool getIsInvulnerable() {
		return mIsInvulnerable;
	}

	public void setIsInvulnerable(bool isInvulnerable) {
		mIsInvulnerable = isInvulnerable;
        if (mIsInvulnerable) {
            playerObject.GetComponent<ParticleSystem>().Play();
            Debug.Log("play");
        } else {
            playerObject.GetComponent<ParticleSystem>().Stop();
            Debug.Log("stop");
        }
	}
}
